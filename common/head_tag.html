<meta name="google" content="notranslate" />

<script
	type="text/x-handlebars"
	data-template-name="components/category-title-link"
>
	<a href={{category.url}}>
	  {{#if category.uploaded_logo.url}}
	    <div>{{cdn-img src=category.uploaded_logo.url class="category-logo"}}</div>
	  {{/if}}
	</a>

	<a href={{category.url}}>
	  {{#if category.read_restricted}}
	    {{fa-icon 'lock'}}
	  {{/if}}

	  <span class="category-name">{{category.name}}</span>
	</a>
</script>

<script
	type="text/x-handlebars"
	data-template-name="components/categories-with-featured-topics"
>
	<div class="category-thing core">
	{{categories-only categories=(filter-core categories) latestTopicOnly=latestTopicOnly showTopics=true}}
	</div>

	<div class="category-thing community">
	{{categories-only categories=(filter-community categories) latestTopicOnly=latestTopicOnly showTopics=true}}
	</div>

	<div class="category-thing private">
	{{categories-only categories=(filter-private categories) latestTopicOnly=latestTopicOnly showTopics=true}}
	</div>
</script>

<script
	type="text/x-handlebars"
	data-template-name="mobile/components/categories-with-featured-topics"
>
	<div class="category-thing core">
	{{categories-only categories=(filter-core categories) latestTopicOnly=latestTopicOnly showTopics=true}}
	</div>

	<div class="category-thing community">
	{{categories-only categories=(filter-community categories) latestTopicOnly=latestTopicOnly showTopics=true}}
	</div>

	<div class="category-thing private">
	{{categories-only categories=(filter-private categories) latestTopicOnly=latestTopicOnly showTopics=true}}
	</div>
</script>

<script>
	const { registerUnbound } = require('discourse-common/lib/helpers');

	registerUnbound('filter-core', (categories) => {
		return categories.filter(
			(a) =>
				a.slug.match(/^info/) ||
				a.slug.match(/^support/) ||
				a.slug.match(/^bug-reports/) ||
				a.slug.match(/^complaints/)
		);
	});

	registerUnbound('filter-private', (categories) => {
		return categories.filter(
			(a) => a.read_restricted || a.slug.match(/^staff/)
		);
	});

	registerUnbound('filter-community', (categories) => {
		return categories.filter(
			(a) =>
				a.slug.match(/^general/i) ||
				a.slug.match(/^off-topic/i) ||
				!a.read_restricted
		);
	});
</script>
